IF (BUILD_TESTING)
  GET_FILENAME_COMPONENT (CMAKE_PATH ${CMAKE_COMMAND} PATH)

  FIND_PROGRAM (CMAKETEST_COMMAND
    NAMES cmaketest
    PATHS ${CMAKE_PATH}
    NO_SYSTEM_PATH
  )

  MARK_AS_ADVANCED (
    CMAKETEST_COMMAND
  )

  IF (CMAKETEST_COMMAND)

    ADD_TEST (vtkMy
      ${CMAKETEST_COMMAND}
      ${VTK_SOURCE_DIR}/Examples/Build/vtkMy
      ${VTK_BINARY_DIR}/Examples/Build/vtkMy
      vtkmyEx1
      ${EXECUTABLE_OUTPUT_PATH}
      vtkMy
      CMAKE_ARGS
      -DVTK_BINARY_PATH:PATH=${VTK_BINARY_DIR}
      -DUSE_BUILT_VTK:BOOL=1
      -DUSE_INSTALLED_VTK:BOOL=0
      -DBUILD_SHARED_LIBS:BOOL=${VTK_BUILD_SHARED_LIBS}
      -DVTKMY_WRAP_PYTHON:BOOL=${VTK_WRAP_PYTHON}
      -DVTKMY_WRAP_JAVA:BOOL=${VTK_WRAP_JAVA}
      -DVTKMY_WRAP_TCL:BOOL=${VTK_WRAP_TCL}
      -DEXECUTABLE_OUTPUT_PATH:PATH=${EXECUTABLE_OUTPUT_PATH}
      -DLIBRARY_OUTPUT_PATH:PATH=${EXECUTABLE_OUTPUT_PATH}
    )
    ADD_TEST (vtkLocal
      ${CMAKETEST_COMMAND}
      ${VTK_SOURCE_DIR}/Examples/Build/vtkLocal
      ${VTK_BINARY_DIR}/Examples/Build/vtkLocal
      vtkLocalTest
      ${EXECUTABLE_OUTPUT_PATH}
      vtkLocal
      CMAKE_ARGS
      -DVTK_DIR:PATH=${VTK_BINARY_DIR}
      -DBUILD_SHARED_LIBS:BOOL=${VTK_BUILD_SHARED_LIBS}
      -DVTKMY_WRAP_PYTHON:BOOL=${VTK_WRAP_PYTHON}
      -DVTKMY_WRAP_JAVA:BOOL=${VTK_WRAP_JAVA}
      -DVTKMY_WRAP_TCL:BOOL=${VTK_WRAP_TCL}
      -DEXECUTABLE_OUTPUT_PATH:PATH=${EXECUTABLE_OUTPUT_PATH}
      -DLIBRARY_OUTPUT_PATH:PATH=${EXECUTABLE_OUTPUT_PATH}
    )

  ENDIF (CMAKETEST_COMMAND)
ENDIF (BUILD_TESTING)
