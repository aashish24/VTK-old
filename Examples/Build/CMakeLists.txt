IF (BUILD_TESTING)

  # vtkMy is tested using cmaketest

  GET_FILENAME_COMPONENT (CMAKE_PATH ${CMAKE_COMMAND} PATH)

  FIND_PROGRAM (CMAKETEST_COMMAND
    NAMES cmaketest
    PATH ${CMAKE_PATH}
  )

  MARK_AS_ADVANCED (
    CMAKETEST_COMMAND
  )

  IF (CMAKETEST_COMMAND)

    ADD_TEST (vtkMy
      ${CMAKETEST_COMMAND}
      ${VTK_SOURCE_DIR}/Examples/Build/vtkMy
      ${VTK_BINARY_DIR}/Examples/Build/vtkMy
      vtkmyEx1
      ${VTK_EXECUTABLE_PATH}
      vtkMy
      CMAKE_ARGS
      -DVTK_BINARY_PATH:PATH=${VTK_BINARY_DIR}
      -DUSE_BUILT_VTK:BOOL=1
      -DUSE_INSTALLED_VTK:BOOL=0
      -DBUILD_SHARED_LIBS:BOOL=ON
      -DUSE_VTK_OUTPUT_PATHS:BOOL=ON
    )

  ENDIF (CMAKETEST_COMMAND)

ENDIF (BUILD_TESTING)
